{"mappings":"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","sources":["src/js/add-to-read.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js"],"sourcesContent":["import { markupForFavoritesAndRead } from './renderMarkup';\nimport { refs } from './refs/refs';\nimport { setToLS, getFromLS } from './local-storage-logic';\n// import { sendEmailVerification } from 'firebase/auth';\n\nconst READ_KEY = 'read_news';\n\nclass AddToRead {\n  isHomePage() {\n    const homePage = refs.galleryEl;\n    if (homePage) {\n      return true;\n    }\n    return false;\n  }\n  addListenersToHomePage() {\n    const linkReadMore = document.querySelectorAll('.thumb__link');\n    linkReadMore.forEach(link =>\n      link.addEventListener('click', this.#onReadClick)\n    );\n    // console.log(linkReadMore)\n  }\n\n  renderReadPage(){ //рендер маркапу\n  const dataFromLS = getFromLS(READ_KEY);\n  const markupTemplate = document.querySelector('#markup-template');\n  const template = markupTemplate.innerHTML;\n  markupTemplate.remove();\n  const result = this.#getDateLocalStorege(dataFromLS);\n  this.#generateAccordionHTML(result, template)\n  this.#createAccordion();\n  }\n\n#getDateLocalStorege(dataFromLS){\n    const objects = dataFromLS; \n    const dates = objects.map(obj => obj.LSDate); \n    const uniqueDates = dates.filter((LSDate, index) => dates.indexOf(LSDate) === index); \n    const result = [];\n  \n    uniqueDates.forEach(LSDate => {\n      const news = objects.filter(obj => obj.LSDate === LSDate)\n      result.push({ LSDate: LSDate, news: news });\n    });\n    console.log(result);\n    return result;\n  }\n\n\n#generateAccordionHTML(result, template) {\n    const listArticlesRef = document.querySelector('#accordion');\n    result.forEach(el => {\n      const section = template.replaceAll('{{title}}', el.LSDate).replaceAll('{{card}}',\n      markupForFavoritesAndRead.createGalleryCardMarkup(el.news))\n\n      const div = document.createElement(\"div\");\n      listArticlesRef.appendChild(div);\n      div.innerHTML = section\n    });\n  }\n\n\n  #onReadClick(event) {\n    const targetItem = event.target.closest('.gallery__item');\n    const alreadyReadText = targetItem.querySelector('.gallery-thumb__already'); //Додали з Яною стилі на li щоб з'являлась надпис Alredy Read\n    targetItem.classList.add('gallery__item--background'); //додаємо блюр на картку\n    alreadyReadText.classList.add('gallery-thumb__already--show'); //opacity на картку\n\n    const img = () => {\n      const resWithoutStart = targetItem\n        .querySelector('.gallery-thumb')\n        .style.backgroundImage.split('');\n\n      resWithoutStart.splice(0, 5);\n      resWithoutStart.splice(-2, 2);\n      return resWithoutStart.join('');\n    };\n    const title = targetItem.querySelector('.gallery__title').textContent;\n    const text = targetItem.querySelector('.gallery__text').textContent;\n    const date = targetItem.querySelector('.thumb__text').textContent;\n    const id = targetItem.id;\n    const category = targetItem.querySelector(\n      '.gallery-thumb__subtitle'\n    ).textContent;\n    const LSDate = new Date().toLocaleDateString()\n    const url = targetItem.querySelector('.thumb__link').href;\n    const article = { img: img(), title, text, date, id, category, url, LSDate};\n    const dataFromLS = getFromLS(READ_KEY) || [];\n    console.log(LSDate)\n    // добавляємо в localStorage\n    const present = dataFromLS.find(article => article.id === id);\n    if (!present) { \n      setToLS(READ_KEY, [...dataFromLS, article], [LSDate]);   // dataFromLS.push(article) // setToLS(READ_KEY, dataFromLS);\n    }\n  }\n#createAccordion(){\n  $('#accordion').accordion({ header: \"h2\", collapsible: true });\n}\n}\n\nconst instance = new AddToRead(); // створює об'єкт  AddToRead\n\nif (instance.isHomePage()) {\n  //перевірка чи знаходишся на homePage\n  refs.galleryEl.addEventListener('build', () => {\n    instance.addListenersToHomePage(); //опрацьовую клік на readMore\n  });\n} else {\n  instance.renderReadPage(); //малюю readPage\n}\n\n// if (!dataFromLS.length && notFoundRef !== null) {\n//   notFoundRef.innerHTML = `<h2 class=\"not-found-title hidden\">You haven't added anything to favorite!</h2><img src=\"https://live.staticflickr.com/65535/52770181328_d91f5366f0_z.jpg\">`;\n//   return;\n// }\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n"],"names":["$hl3Cc","parcelRequire","$b770d7ec3f5f609b$var$READ_KEY","$b770d7ec3f5f609b$var$_getDateLocalStorege","WeakSet","$b770d7ec3f5f609b$var$_generateAccordionHTML","$b770d7ec3f5f609b$var$_onReadClick","$b770d7ec3f5f609b$var$_createAccordion","$b770d7ec3f5f609b$var$getDateLocalStorege","dataFromLS","objects","dates","map","obj","LSDate","uniqueDates","filter","index","indexOf","result","forEach","news","push","console","log","$b770d7ec3f5f609b$var$generateAccordionHTML","template","listArticlesRef","document","querySelector","el","section","replaceAll","$cky31","markupForFavoritesAndRead","createGalleryCardMarkup","div","createElement","appendChild","innerHTML","$b770d7ec3f5f609b$var$onReadClick","event","targetItem","target","closest","alreadyReadText","classList","add","title","textContent","text","date","id","category","Date","toLocaleDateString","url","href","article1","img","resWithoutStart","style","backgroundImage","split","splice","join","$335mm","getFromLS","find","article","setToLS","$b770d7ec3f5f609b$var$createAccordion","$","accordion","header","collapsible","$b770d7ec3f5f609b$var$instance","isHomePage","$3ILHO","refs","galleryEl","addListenersToHomePage","querySelectorAll","link","addEventListener","$parcel$interopDefault","this","renderReadPage","markupTemplate","remove","call","$8iF6T","Object","defineProperty","module","exports","value","default","receiver","privateSet","fn","has","TypeError","$60afe4cd2804d2bb$var$_checkPrivateRedeclaration","__esModule"],"version":3,"file":"read.25e09d48.js.map"}