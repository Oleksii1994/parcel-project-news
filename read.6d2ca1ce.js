!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=n),n.register("jLBgW",(function(t,r){var o=n("8MBJY"),a=n("beht7"),i=n("fyAfh"),l=n("a2hTj"),c=n("dDDEV"),s=n("8nrFW");n("6JpON");var u=n("fkNhc"),d=n("cokon"),f=n("gQOBw"),g=n("5118m"),p=n("cqmI4"),h=n("4LQlN"),y=n("iXDbJ"),m=n("cQoPk"),v=n("1RvkV"),_=(0,u.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),b=(0,d.getDatabase)(_),S=(0,f.getAuth)();(0,d.ref)(b,"users");e(y).init();var w="read_news",L=new WeakSet,E=new WeakSet,k=new WeakSet,x=new WeakSet;function R(e){var t=e,r=t.map((function(e){return e.LSDate})),o=r.filter((function(e,t){return r.indexOf(e)===t})),n=[];return o.forEach((function(e){var r=t.filter((function(t){return t.LSDate===e}));n.push({LSDate:e,news:r})})),console.log(n),n}function D(e,t){var r=document.querySelector("#accordion");e.forEach((function(e){var o=t.replaceAll("{{title}}",e.LSDate).replaceAll("{{card}}",g.markupForFavoritesAndRead.createGalleryCardMarkup(e.news)),n=document.createElement("div");r.appendChild(n),n.innerHTML=o}))}function j(t){var r=t.target.closest(".gallery__item"),o=r.querySelector(".gallery-thumb__already");r.style.opacity="0.7",o.classList.add("gallery-thumb__already--show");var n,a=r.querySelector(".gallery__title").textContent,i=r.querySelector(".gallery__text").textContent,l=r.querySelector(".thumb__text").textContent,c=r.id,u=r.querySelector(".gallery-thumb__subtitle").textContent,d=(new Date).toLocaleDateString(),f=r.querySelector(".thumb__link").href,g={img:(n=r.querySelector(".gallery-thumb").style.backgroundImage.split(""),n.splice(0,5),n.splice(-2,2),n.join("")),title:a,text:i,date:l,id:c,category:u,url:f,LSDate:d},p=(0,h.getFromLS)(w)||[];console.log(d);var y=p.find((function(e){return e.id===c}));console.log(g);var m=S.currentUser;if(m){var _=m.uid;(0,v.addToReadNews)(g,_)}y||(0,h.setToLS)(w,e(s)(p).concat([g]),[d])}function T(){$("#accordion").accordion({header:"h2",collapsible:!0})}var q=new(function(){"use strict";function t(){e(o)(this,t),e(i)(this,L),e(i)(this,E),e(i)(this,k),e(i)(this,x)}return e(l)(t,[{key:"isHomePage",value:function(){return!!p.refs.galleryEl}},{key:"addListenersToHomePage",value:function(){var t=this;document.querySelectorAll(".thumb__link").forEach((function(r){return r.addEventListener("click",e(a)(t,k,j))}))}},{key:"renderReadPage",value:function(){var t=(0,h.getFromLS)(w),r=document.querySelector("#markup-template"),o=r.innerHTML;r.remove();var n=e(a)(this,L,R).call(this,t);e(a)(this,E,D).call(this,n,o),e(a)(this,x,T).call(this)}}]),t}());q.isHomePage()?p.refs.galleryEl.addEventListener("build",(function(){q.addListenersToHomePage()})):q.renderReadPage();var A={readGalleryList:document.querySelector("#read-news-list")};"Read"===document.title&&function(t){var r=(0,h.getFromLS)(w),o=new URL(n("5R40L"));if(m.notFoundRef.classList.add("not-found-box-hidden"),!r.length)return m.notFoundRef.classList.remove("not-found-box-hidden"),void window.scrollTo({top:0,behavior:"smooth"});if(null===t)return;t.addEventListener("click",(function(t){var r=t.target.closest(".gallery-thumb__btn");if(r){var n,a=t.target.closest(".gallery__item"),i=a.querySelector(".gallery__title").textContent,l=a.querySelector(".gallery__text").textContent,u=a.querySelector(".thumb__text").textContent,d=a.id,f=a.querySelector(".gallery-thumb__subtitle").textContent,g=a.querySelector(".thumb__link").href,p={img:(n=a.querySelector(".gallery-thumb").style.backgroundImage.split(""),n.splice(0,5),n.splice(-2,2),n.join("")),title:i,text:l,date:u,id:d,category:f,url:g},y=(0,h.getFromLS)(m.FAVORITE_KEY);if(y.find((function(e){return e.id===d}))){var v=y.filter((function(e){return e.id!==d}));return(0,h.setToLS)(m.FAVORITE_KEY,v),void(r.innerHTML='<p class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="'.concat(o,"#").concat("icon-like-icon",'"></use></svg></p>'))}var _=e(s)(y).concat([e(c)({},p)]);(0,h.setToLS)(m.FAVORITE_KEY,_),r.innerHTML='<p class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="'.concat(o,"#").concat("icon-like",'"></svg></p>')}}))}(A.readGalleryList)})),n.register("beht7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}})),n.register("fyAfh",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){o.default(e,t),t.add(e)};var r,o=(r=n("5k7tO"))&&r.__esModule?r:{default:r}})),n.register("1RvkV",(function(t,r){var o,a,i,l;o=t.exports,a="addToReadNews",i=function(){return y},Object.defineProperty(o,a,{get:i,set:l,enumerable:!0,configurable:!0});var c=n("6JpON"),s=n("fkNhc"),u=n("cokon"),d=n("gQOBw"),f=(0,s.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),g=(0,u.getDatabase)(f),p=(0,d.getAuth)(),h=(0,u.ref)(g,"users");function y(t,r){var o=p.currentUser;(0,u.get)(h).then((function(n){var a=[],i=!1;if(n.forEach((function(e){var r=e.val();r.email.toLowerCase()===o.email.toLowerCase()&&(r.newsReadData.forEach((function(e){e.id===t.id&&(i=!0)})),r.newsReadData.forEach((function(e){a.push(e)})))})),i)return console.log("Article already exists"),void e(c).Notify.success("News already added to read");a.push(t);var l=a.filter(Boolean);return e(c).Notify.success("News added to read"),(0,u.update)((0,u.ref)(g,"users/".concat(r)),{newsReadData:l}).then((function(){a.splice(0,a.length)})).catch((function(t){e(c).Notify.failure("Something went wrong, please try again"),console.error(t)}))})).catch((function(t){e(c).Notify.failure("Something went wrong, please try again"),console.error(t)}))}})),n.register("5R40L",(function(e,t){e.exports=n("aNJCr").getBundleURL("ep4Vl")+n("iE7OH").resolve("6u7XD")})),n("iE7OH").register(JSON.parse('{"ep4Vl":"read.6d2ca1ce.js","ilJtq":"read.983afc32.css","6u7XD":"icon-card.42ade37b.svg"}'))}();
//# sourceMappingURL=read.6d2ca1ce.js.map
