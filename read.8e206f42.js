function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},s=r.parcelRequired7c6;null==s&&((s=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},r.parcelRequired7c6=s),s.register("kyEFX",(function(t,r){var a,n;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var s={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},n=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s.register("jGhRw",(function(e,t){const r=[{width:768,useClass:"mobile"},{width:1279,useClass:"tablet"}];function a(){const e=r,t=window.innerWidth,a=e.find((e=>t<=e.width));let n;n=a?a.useClass:"desktop",document.body.classList.forEach((e=>{e.startsWith("screen-")&&document.body.classList.remove(e)})),document.body.classList.add(`screen-${n}`)}window.addEventListener("resize",a),window.addEventListener("DOMContentLoaded",a)})),s.register("4MqUU",(function(r,a){e(r.exports,"newsApi",(function(){return w}));var n=s("jkMrE"),i=s("g6yUq"),o=s("gMe87"),l=s("1BWOC"),u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,g=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,y=new WeakMap,b=new WeakMap;const w=new class{async fetchSearchArticles(){this.updateParams();const e=`${t(n)(this,u)}${t(n)(this,c)}${new URLSearchParams(t(n)(this,h))}`,r=await fetch(e);this.errorHandle(r);const{response:{docs:a,meta:s}}=await r.json();return this.incrementPage(),t(o)(this,p,s.hits),t(o)(this,m,this.setTotalHits()),t(o)(this,g,l.NormalizeData.searchData(a)),{docs:a,meta:s}}async fetchPopularArticles(){const e=`${t(n)(this,u)}mostpopular/v2/viewed/1.json?api-key=${t(n)(this,d)}`,r=await fetch(e);this.errorHandle(r,r.statusText);const{results:a,num_results:s}=await r.json();return{results:a,num_results:s}}async fetchArticlesByCategory(){this.setPerCategoryPage();const e=new URLSearchParams({offset:this.catCurrentPage,limit:t(n)(this,f)}),r=`news/v3/content/nyt/${this.category}.json?`,a=`${t(n)(this,u)}${r}api-key=${t(n)(this,d)}&${e}`;console.log(a);const s=await fetch(a);this.incrementCatPage(),this.errorHandle(s,s.statusText);const{results:i,num_results:c}=await s.json();return t(o)(this,b,c),t(o)(this,y,this.setTotalButtons()),console.log(l.NormalizeData.categoryData(i)),i}errorHandle(e,t){if(!e.ok)throw new Error(`Sorry, an error occurred: ${t}`)}incrementPage(){this.currentPage+=1}incrementCatPage(){this.catCurrentPage+=1}resetCatPage(){this.catCurrentPage=0}resetPage(){this.currentPage=0}updateParams(){""!==this.beginDate?Object.assign(t(n)(this,h),{q:this.searchQuery,page:this.currentPage,begin_date:this.beginDate,end_date:this.endDate}):Object.assign(t(n)(this,h),{q:this.searchQuery,page:this.currentPage})}resetHits(){t(o)(this,p,0)}setTotalHits(){let e=Math.ceil(t(n)(this,p)/10);return e>200?(e=200,e):e}setTotalButtons(){let e=Math.ceil(t(n)(this,b)/t(n)(this,f));return e>200?(e=200,e):e}encodeCategory(e){return e.includes(" ")?encodeURIComponent(e):e}setPerCategoryPage(){return window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 767px)").matches?t(o)(this,f,5):window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1279px)").matches?t(o)(this,f,8):window.matchMedia("(min-width: 1280px)").matches?t(o)(this,f,9):void 0}set query(e){this.searchQuery=e}get query(){return this.searchQuery}get page(){return this.currentPage}set page(e){this.currentPage=e}get startDate(){return this.beginDate}set startDate(e){this.beginDate=e}get finishDate(){return this.endDate}set finishDate(e){this.endDate=e}get newsDataArr(){return t(n)(this,g)}set newsDataArr(e){t(o)(this,g,e)}get currentCategory(){return this.category}set currentCategory(e){this.category=e}get hits(){return t(n)(this,p)}set hits(e){t(o)(this,p,e)}get totalHits(){return t(n)(this,m)}get totalButtons(){return t(n)(this,y)}constructor(){t(i)(this,u,{writable:!0,value:"https://api.nytimes.com/svc/"}),t(i)(this,c,{writable:!0,value:"search/v2/articlesearch.json?"}),t(i)(this,d,{writable:!0,value:"kkEdLmiWAben4vvAV9iKuhykdEAlksXW"}),t(i)(this,h,{writable:!0,value:{q:this.searchQuery,"api-key":t(n)(this,d),page:this.currentPage,sort:"newest"}}),t(i)(this,g,{writable:!0,value:[]}),t(i)(this,p,{writable:!0,value:void 0}),t(i)(this,f,{writable:!0,value:5}),t(i)(this,m,{writable:!0,value:0}),t(i)(this,y,{writable:!0,value:0}),t(i)(this,b,{writable:!0,value:0}),this.searchQuery="",this.category="all",this.currentPage=0,this.beginDate="",this.endDate="",this.updateSearchParams=!0,this.catCurrentPage=0}}})),s.register("jkMrE",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var n=r.default(e,t,"get");return a.default(e,n)};var r=n(s("fExtF")),a=n(s("iaRLo"));function n(e){return e&&e.__esModule?e:{default:e}}})),s.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}})),s.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),s.register("g6yUq",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){a.default(e,t),t.set(e,r)};var r,a=(r=s("7K24o"))&&r.__esModule?r:{default:r}})),s.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),s.register("gMe87",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){var s=r.default(e,t,"set");return a.default(e,s,n),n};var r=n(s("fExtF")),a=n(s("3LGG3"));function n(e){return e&&e.__esModule?e:{default:e}}})),s.register("3LGG3",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}})),s.register("1BWOC",(function(t,r){e(t.exports,"NormalizeData",(function(){return a}));class a{static formatDate(e){const t=new Date(e);return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`}static convertDates(e){if(10===e.length){let t=e.split("-");return[t[0]+t[1]+t[2],""]}if(null!==e.match(/^\d{4}-\d{2}-\d{2}\b to \d{4}-\d{2}-\d{2}\b/)){let t=e.split(" to "),r=t[0].split("-"),a=t[1].split("-");return[r[0]+r[1]+r[2],a[0]+a[1]+a[2]]}}static formatDateToString(e){const[t,r,a]=e.split("/");return`${a}${r.padStart(2,"0")}${t.padStart(2,"0")}`}static searchData(e){return e.map((({abstract:e,headline:t,pub_date:r,uri:a,multimedia:n,section_name:s,web_url:i})=>{let o="";return o=0!==n.length?`https://www.nytimes.com/${n[0].url}`:"https://media.tenor.com/_3uPSgb8o5gAAAAC/ukraine-ukraine-flag.gif",{title:t.print_headline?t.print_headline:t.main,text:e,date:this.formatDate(r),img:o,category:s,id:a,url:i}}))}static popularData(e){return e.map((({abstract:e,title:t,published_date:r,uri:a,media:n,section:s,url:i})=>{let o="";return o=0!==n.length?n[0]["media-metadata"][2].url:"https://media.tenor.com/_3uPSgb8o5gAAAAC/ukraine-ukraine-flag.gif",{title:t,text:e,date:this.formatDate(r),img:o,category:s,id:a,url:i}}))}static categoryData(e){return e.map((({abstract:e,title:t,published_date:r,uri:a,multimedia:n,section:s,url:i})=>{let o="";return o=null!==n&&0!==n.length?n[2].url:"https://media.tenor.com/_3uPSgb8o5gAAAAC/ukraine-ukraine-flag.gif",{title:t,text:e,date:this.formatDate(r),img:o,category:s,id:a,url:i}}))}}})),s.register("cecBV",(function(e,t){({el:document.querySelector(".btn-up"),show(){this.el.classList.remove("btn-up_hide")},hide(){this.el.classList.add("btn-up_hide")},addEventListener(){window.addEventListener("scroll",(()=>{(window.scrollY||document.documentElement.scrollTop)>600?this.show():this.hide()})),document.querySelector(".btn-up").onclick=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}}}).addEventListener()})),s.register("cky31",(function(t,r){e(t.exports,"markup",(function(){return n})),e(t.exports,"markupForFavoritesAndRead",(function(){return i})),e(t.exports,"addWeatherMarkup",(function(){return o}));var a=s("jJkRO");s("335mm");const n={createGalleryCardMarkup(e){const t=new URL(s("DnHGg"));return e.map((({img:e,title:r,text:n,date:s,id:i,category:o,url:l},u)=>`\n      <li id="${i}" class="gallery__item" data-aos="fade-up"\n     data-aos-duration="1000">\n        <div class="gallery-thumb" style="background-image: url('${e}')">\n          <p class="gallery-thumb__subtitle">${o}</p>\n          <p class="gallery-thumb__already">\n            Already read\n            <svg width="18" height="18"><use href="${t}#icon-check"></use></svg>\n          </p>\n          ${(0,a.checkPresentArticle)(i)?`<button type="button" class="gallery-thumb__btn"><span class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="${t}#icon-like"></use></svg></span></button>`:`<button type="button" class="gallery-thumb__btn"><span class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="${t}#icon-like-icon"></use></svg></span></button>`}\n        </div>\n        <h3 class="gallery__title">${r}</h3>\n        <p class="gallery__text">${n}</p>\n          <div class="thumb">\n            <p class="thumb__text">${s}</p>\n            <a class="thumb__link" href="${l}" target="_blank">Read more</a>\n          </div>\n      </li>`))},clearMarkup(e){e.innerHTML=""},renderMarkup(e,t){e.insertAdjacentHTML("beforeend",t)}},i={createGalleryCardMarkup(e){const t=new URL(s("DnHGg"));return e.map((({img:e,title:r,text:n,date:s,id:i,category:o,url:l})=>`<li id="${i}" class="gallery__item" data-aos="fade-up"\n     data-aos-duration="1000">\n  <div class="gallery-thumb" style="background-image: url('${e}')">\n      <p class="gallery-thumb__subtitle">${o}</p>\n      <p class="gallery-thumb__already">\n        Already read\n      </p>\n    ${(0,a.checkPresentArticle)(i)?`<button type="button" class="gallery-thumb__btn"><span class="gallery-thumb__name add">Remove from favorite<svg class="gallery-thumb__icon" width="16" height="16"><use href="${t}#icon-like"></use></svg></span></button>`:`<button type="button" class="gallery-thumb__btn"><span class="gallery-thumb__name add">Add to favorite<svg class="gallery-thumb__icon" width="16" height="16"><use href="${t}#icon-like-icon"></use></svg></span></button>`}\n  </div>\n    <h3 class="gallery__title">${r}</h3>\n    <p class="gallery__text">${n}</p>\n      <div class="thumb">\n        <p class="thumb__text">${s}</p>\n        <a class="thumb__link" href="${l}" target="_blank">Read more</a>\n      </div>\n</li>`)).join("")},clearMarkup(e){e.innerHTML=""},renderMarkup(e,t){e.insertAdjacentHTML("beforeend",t)},renderMarkupBefore(e,t){e.insertAdjacentHTML("beforebegin",t)}};function o(e){const t='<li class="weather" data-aos="fade-left"\n     data-aos-duration="1000">\n  <div class="weather-box"></div>\n  <button class="weather-button">Weather for Week</button>\n</li>';return window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 767px)").matches?e.splice(0,0,t):window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1279px)").matches?e.splice(1,0,t):window.matchMedia("(min-width: 1280px)").matches?e.splice(2,0,t):void 0}})),s.register("jJkRO",(function(t,r){e(t.exports,"onLoadHomePage",(function(){return y})),e(t.exports,"checkPresentArticle",(function(){return b}));var a=s("cky31"),n=s("335mm"),i=s("3ILHO");s("b6yhC"),s("7Y9D8");var o=s("gKkQl"),l=s("jAzyG"),u=s("eyjy7"),c=s("k4kaw");const d=(0,o.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),h=(0,l.getDatabase)(d),g=(0,u.getAuth)(),p=((0,l.ref)(h,"users"),document.querySelector(".favorite"),document.querySelector(".not-found-box")),f=document.querySelector("#news-list"),m="favorite_news";function y(){const e="favorite_news",t=new URL(s("DnHGg"));i.refs.galleryEl.addEventListener("click",(function(r){const a=r.target.closest(".gallery-thumb__btn");if(!a)return;const s=r.target.closest(".gallery__item"),i=s.querySelector(".gallery__title").textContent,o=s.querySelector(".gallery__text").textContent,l=s.querySelector(".thumb__text").textContent,u=s.id,d=s.querySelector(".gallery-thumb__subtitle").textContent,h=s.querySelector(".thumb__link").href,p={img:(()=>{const e=s.querySelector(".gallery-thumb").style.backgroundImage.split("");return e.splice(0,5),e.splice(-2,2),e.join("")})(),title:i,text:o,date:l,id:u,category:d,url:h},f=(0,n.getFromLS)(e),m=f.find((e=>e.id===u)),y=g.currentUser;if(y){const e=y.uid;(0,c.addOrDeleteFavoriteNews)(p,e,a)}if(m){const r=f.filter((e=>e.id!==u));(0,n.setToLS)(e,r);const s=g.currentUser;if(s){const e=s.uid;(0,c.addOrDeleteFavoriteNews)(p,e,a)}return void(a.innerHTML=`<p class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="${t}#icon-like-icon"></use></svg></p>`)}const b=[...f,{...p}];(0,n.setToLS)(e,b),a.innerHTML=`<p class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="${t}#icon-like"></svg></p>`}))}function b(e){return(0,n.getFromLS)(m).find((t=>t.id===e))}function w(e){if(!e.target.closest(".gallery-thumb__btn"))return;const t=e.target.closest(".gallery__item").id,r=(0,n.getFromLS)(m);if(r.find((e=>e.id===t))){const e=r.filter((e=>e.id!==t));(0,n.setToLS)(m,e),e.length||setTimeout((()=>{(0,n.getFromLS)(m).length||p.classList.remove("not-found-box-hidden")}),100);const s=a.markupForFavoritesAndRead.createGalleryCardMarkup(e);f.innerHTML=s}else;}"Favorite"===document.title&&function(){const e=(0,n.getFromLS)(m);e.length?(p.classList.add("not-found-box-hidden"),null!==f&&(f.innerHTML=a.markupForFavoritesAndRead.createGalleryCardMarkup(e),f.addEventListener("click",w))):p.classList.remove("not-found-box-hidden")}()})),s.register("335mm",(function(t,r){function a(e,t){try{const r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}}function n(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(e){console.error("Get state error: ",e.message)}}e(t.exports,"setToLS",(function(){return a})),e(t.exports,"getFromLS",(function(){return n}))})),s.register("b6yhC",(function(e,t){function r(e,t,r){var a,n,s,i,o;function l(){var u=Date.now()-i;u<t&&u>=0?a=setTimeout(l,t-u):(a=null,r||(o=e.apply(s,n),s=n=null))}null==t&&(t=100);var u=function(){s=this,n=arguments,i=Date.now();var u=r&&!a;return a||(a=setTimeout(l,t)),u&&(o=e.apply(s,n),s=n=null),o};return u.clear=function(){a&&(clearTimeout(a),a=null)},u.flush=function(){a&&(o=e.apply(s,n),s=n=null,clearTimeout(a),a=null)},u}r.debounce=r,e.exports=r})),s.register("k4kaw",(function(r,a){e(r.exports,"addOrDeleteFavoriteNews",(function(){return g}));var n=s("7Y9D8"),i=s("gKkQl"),o=s("jAzyG"),l=s("eyjy7");const u=(0,i.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),c=(0,o.getDatabase)(u),d=(0,l.getAuth)(),h=(0,o.ref)(c,"users");function g(e,r,a){const s=d.currentUser;(0,o.get)(h).then((i=>{const l=[];let u=!1;if(i.forEach((t=>{const r=t.val();r.email===s.email&&r.newsFavouriteData.forEach((t=>{t.id===e.id&&(u=!0),l.push(t)}))})),u){console.log("Article already exists");const s=l.filter((t=>t.id!==e.id)).filter(Boolean);return 0===s.length&&s.push(""),(0,o.update)((0,o.ref)(c,`users/${r}`),{newsFavouriteData:s}).then((()=>{t(n).Notify.success("News removed from favorites"),a.innerHTML='<p class="gallery-thumb__name add">Add to favorite<span class="gallery-thumb__icon">&#9825;</span></p>'})).catch((e=>{t(n).Notify.failure("Something went wrong, please try again"),console.error(e)}))}{l.push(e);const s=l.filter(Boolean).filter(Boolean);return(0,o.update)((0,o.ref)(c,`users/${r}`),{newsFavouriteData:s}).then((()=>{t(n).Notify.success("News added to favorites"),l.splice(0,l.length),a.innerHTML='<p class="gallery-thumb__name add">Remove from favorite<span class="gallery-thumb__icon">&#10084;</span></p>'})).catch((e=>{t(n).Notify.failure("Something went wrong, please try again"),console.error(e)}))}})).catch((e=>{t(n).Notify.failure("Something went wrong, please try again"),console.error(e)}))}})),s.register("DnHGg",(function(e,t){e.exports=new URL(s("kyEFX").resolve("bwyUR"),import.meta.url).toString()})),s("kyEFX").register(JSON.parse('{"4uJZR":"read.8e206f42.js","bwyUR":"icon-card.42ade37b.svg"}'));
//# sourceMappingURL=read.8e206f42.js.map
