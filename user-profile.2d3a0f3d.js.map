{"mappings":"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","sources":["src/js/firebace/user-profile.js","src/js/mobile-menu.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { initializeApp, firebase } from 'firebase/app';\nimport {\n  getDatabase,\n  set,\n  ref,\n  update,\n  get,\n  child,\n  userId,\n} from 'firebase/database';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y',\n  authDomain: 'project-goit2023-js.firebaseapp.com',\n  databaseURL: 'https://project-goit2023-js-default-rtdb.firebaseio.com',\n  projectId: 'project-goit2023-js',\n  storageBucket: 'project-goit2023-js.appspot.com',\n  messagingSenderId: '407142734195',\n  appId: '1:407142734195:web:6d45ec3cdde16415370d06',\n  measurementId: 'G-VMY0EQ75TG',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst database = getDatabase(app);\nconst auth = getAuth();\nexport let LOCALSTORAGE_USER = '';\n\nexport const usersRef = ref(database, 'users');\n\nconst refs = {\n  userName: document.querySelector('.user-profile-name'),\n  userEmail: document.querySelector('.user-profile-email'),\n  chancgePassword: document.querySelector('.change-password'),\n  changePasswordPrg: document.querySelector('.change-password--prg'),\n  favoriteNews: document.querySelector('.favorite-news-render'),\n  readNews: document.querySelector('.read-news-render'),\n  profileImg: document.querySelector('.profile-img'),\n  editPhoto: document.querySelector('.profile-button'),\n  profileImgCard: document.querySelector('.profile-img__card'),\n};\n\nrefs.chancgePassword.addEventListener('submit', changeUserPassword);\nrefs.editPhoto.addEventListener('click', editPhotoFun);\n\ngetNameAndEmail();\n\nfunction getNameAndEmail() {\n  get(usersRef)\n    .then(snapshot => {\n      snapshot.forEach(childSnapshot => {\n        const user = auth.currentUser;\n        // console.log(user);\n        if (!user) {\n          return;\n        }\n        const userArr = childSnapshot.val();\n\n        if (userArr.email.toLowerCase() === user.email.toLowerCase()) {\n          const newsFavourite = userArr.newsFavouriteData.filter(\n            item => item !== ''\n          );\n          const newsRead = userArr.newsReadData.filter(item => item !== '');\n\n          // console.log(userArr);\n\n          refs.profileImgCard.src = `${userArr.userPhoto}`;\n          refs.userName.innerHTML = userArr.username;\n          refs.userEmail.innerHTML = userArr.email;\n          refs.favoriteNews.innerHTML = newsFavourite.length;\n          refs.readNews.innerHTML = newsRead.length;\n        }\n      });\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n\nfunction changeUserPassword(e) {\n  e.preventDefault();\n  const input = e.target.children[1].value;\n\n  if (refs.changePasswordPrg.textContent === 'Old password:') {\n    get(usersRef)\n      .then(snapshot => {\n        snapshot.forEach(childSnapshot => {\n          const user = auth.currentUser;\n\n          const userArr = childSnapshot.val();\n\n          if (userArr.email.toLowerCase() === user.email.toLowerCase()) {\n            // console.log(userArr.password);\n            if (input === userArr.password) {\n              Notiflix.Notify.success('Corect Password');\n              refs.changePasswordPrg.innerHTML = 'New password:';\n            } else {\n              Notiflix.Notify.failure('Wrong password, please try again');\n            }\n          }\n        });\n      })\n      .catch(error => {\n        Notiflix.Notify.failure('Something went wrong, please try again');\n        console.error(error);\n      });\n  }\n  if (refs.changePasswordPrg.textContent === 'New password:') {\n    get(usersRef)\n      .then(snapshot => {\n        snapshot.forEach(childSnapshot => {\n          const user = auth.currentUser;\n          const userArr = childSnapshot.val();\n          if (userArr.email.toLowerCase() === user.email.toLowerCase()) {\n            refs.changePasswordPrg.innerHTML = 'Old password:';\n            // console.log(userArr.password);\n            Notiflix.Notify.success('Password changed successfully');\n            return update(ref(database, `users/${user.uid}`), {\n              password: input,\n            });\n          }\n        });\n      })\n      .catch(error => {\n        Notiflix.Notify.failure('Something went wrong, please try again');\n        console.error(error);\n      });\n  }\n}\n\nfunction editPhotoFun() {\n  refs.editPhoto.disabled = true;\n  const form = `\n  <div class=\"input__wrapper\">\n    <input name=\"file\" type=\"file\" id=\"input__file\" class=\"input input__file add-photo-in-data\" multiple>\n    <label for=\"input__file\" class=\"input__file-button\">\n      <span class=\"input__file-icon-wrapper\">\n        <svg class=\"img-download\" viewBox=\"0 0 128 128\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M61.88,93.12h0a3,3,0,0,0,.44.36l.24.13a1.74,1.74,0,0,0,.59.24l.25.07h0a3,3,0,0,0,1.16,0l.26-.08.3-.09a3,3,0,0,0,.3-.16l.21-.12a3,3,0,0,0,.46-.38L93,66.21A3,3,0,1,0,88.79,62L67,83.76V3a3,3,0,0,0-6,0V83.76L39.21,62A3,3,0,0,0,35,66.21Z\"/>\n          <path d=\"M125,88a3,3,0,0,0-3,3v22a9,9,0,0,1-9,9H15a9,9,0,0,1-9-9V91a3,3,0,0,0-6,0v22a15,15,0,0,0,15,15h98a15,15,0,0,0,15-15V91A3,3,0,0,0,125,88Z\"/>\n        </svg>\n      </span>\n      <span class=\"input__file-button-text\">Select a file</span>\n    </label>\n  </div>`;\n  refs.profileImg.insertAdjacentHTML('beforeend', form);\n\n  const formPhoto = document.querySelector('.add-photo-in-data');\n  formPhoto.addEventListener('change', addUserPhotoInData);\n\n  function addUserPhotoInData(e) {\n    e.preventDefault();\n\n    // Читаем содержимое файла\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(formPhoto.files[0]);\n\n    // Создаем ссылку на фото после того, как содержимое файла будет прочитано\n    fileReader.onload = function () {\n      const photoData = fileReader.result;\n      refs.profileImgCard.src = `${photoData}`;\n\n      get(usersRef)\n        .then(snapshot => {\n          snapshot.forEach(childSnapshot => {\n            const user = auth.currentUser;\n            const userId = user.uid;\n            if (!user) {\n              return;\n            }\n            const userArr = childSnapshot.val();\n\n            if (userArr.email.toLowerCase() === user.email.toLowerCase()) {\n              return update(ref(database, `users/${userId}`), {\n                userPhoto: photoData,\n              })\n                .then(() => {\n                  // console.log('News added to favorites');\n                  Notiflix.Notify.success('Photo added to profile');\n                })\n                .catch(error => {\n                  Notiflix.Notify.failure(\n                    'Something went wrong, please try again'\n                  );\n                  console.error(error);\n                });\n            }\n          });\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    };\n  }\n}\n","// Budna Elvira\nimport { disableBodyScroll } from 'body-scroll-lock';\nimport { enableBodyScroll } from 'body-scroll-lock';\n\n(() => {\n  const mobileMenu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n\n  const toggleMenu = () => {\n    const isMenuOpen =\n      openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n    openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n    mobileMenu.classList.toggle('is-open');\n\n    !isMenuOpen\n      ? disableBodyScroll(document.body)\n      : enableBodyScroll(document.body);\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  // Close the mobile menu on wider screens if the device orientation changes\n  window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    mobileMenu.classList.remove('is-open');\n    openMenuBtn.setAttribute('aria-expanded', false);\n    enableBodyScroll(document.body);\n  });\n})();\n\n// import { THEMES } from './refs/const.js';\n\n// const mobileMenu = document.querySelector('.mobile-menu');\n\n// function changeTheme() {\n//   if (mobileMenu.classList.contains(THEMES.LIGHT_THEME)) {\n//     mobileMenu.classList.replace(THEMES.LIGHT_THEME, THEMES.DARK_THEME);\n//     refs.darkThemeBox.classList.add('active');\n//     refs.lightThemeBox.classList.remove('active');\n//     saveTheme(THEMES.DARK_THEME);\n//   } else {\n//     mobileMenu.classList.replace(THEMES.DARK_THEME, THEMES.LIGHT_THEME);\n//     refs.darkThemeBox.classList.remove('active');\n//     refs.lightThemeBox.classList.add('active');\n//     saveTheme(THEMES.LIGHT_THEME);\n//   }\n// }\n"],"names":["$6JpON","parcelRequire","$082e77577f11875e$var$app","$fkNhc","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","$082e77577f11875e$var$database","$cokon","getDatabase","$082e77577f11875e$var$auth","$gQOBw","getAuth","$082e77577f11875e$export$614862d7a42f7add","ref","$082e77577f11875e$var$refs","userName","document","querySelector","userEmail","chancgePassword","changePasswordPrg","favoriteNews","readNews","profileImg","editPhoto","profileImgCard","addEventListener","e","preventDefault","input","target","children","value","textContent","get","then","snapshot","forEach","childSnapshot","user","currentUser","userArr","val","email","toLowerCase","password","$parcel$interopDefault","Notify","success","innerHTML","failure","catch","error","console","update","concat","uid","disabled","insertAdjacentHTML","formPhoto","fileReader","FileReader","readAsDataURL","files","onload","photoData","result","src","userId1","userPhoto","newsFavourite","newsFavouriteData","filter","item","newsRead","newsReadData","username","length","mobileMenu","openMenuBtn","closeMenuBtn","toggleMenu","$gnsaF","isMenuOpen","getAttribute","setAttribute","classList","toggle","enableBodyScroll","body","disableBodyScroll","window","matchMedia","matches","remove"],"version":3,"file":"user-profile.2d3a0f3d.js.map"}