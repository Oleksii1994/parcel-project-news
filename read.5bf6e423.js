function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=r.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},r.parcelRequired7c6=a),a.register("fKrXO",(function(r,o){t(r.exports,"instance",(function(){return k}));var n=a("hl3Cc"),i=a("8iF6T");a("7Y9D8");var s=a("gKkQl"),l=a("jAzyG"),c=a("eyjy7"),d=a("cky31"),u=a("3ILHO"),g=a("335mm"),f=a("lL5zp"),p=a("jJkRO"),h=a("kPZvK");const y=(0,s.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),m=(0,l.getDatabase)(y),_=(0,c.getAuth)();(0,l.ref)(m,"users");e(f).init();const b="read_news";var S=new WeakSet,w=new WeakSet,v=new WeakSet,L=new WeakSet;function x(e){const t=e,r=t.map((e=>e.LSDate)),o=r.filter(((e,t)=>r.indexOf(e)===t)),n=[];return o.forEach((e=>{const r=t.filter((t=>t.LSDate===e));n.push({LSDate:e,news:r})})),n}function E(e,t){const r=document.querySelector("#accordion");e.forEach((e=>{const o=t.replaceAll("{{title}}",e.LSDate).replaceAll("{{card}}",d.markupForFavoritesAndRead.createGalleryCardMarkup(e.news)),n=document.createElement("div");r.appendChild(n),n.innerHTML=o}))}function j(e){const t=e.target.closest(".gallery__item"),r=t.querySelector(".gallery-thumb__already");t.style.opacity="0.7",r.classList.add("gallery-thumb__already--show");const o=t.querySelector(".gallery__title").textContent,n=t.querySelector(".gallery__text").textContent,a=t.querySelector(".thumb__text").textContent,i=t.id,s=t.querySelector(".gallery-thumb__subtitle").textContent,l=(new Date).toLocaleDateString(),c=t.querySelector(".thumb__link").href,d={img:(()=>{const e=t.querySelector(".gallery-thumb").style.backgroundImage.split("");return e.splice(0,5),e.splice(-2,2),e.join("")})(),title:o,text:n,date:a,id:i,category:s,url:c,LSDate:l},u=(0,g.getFromLS)(b)||[],f=u.find((e=>e.id===i)),p=_.currentUser;if(p){const e=p.uid;(0,h.addToReadNews)(d,e)}f||(0,g.setToLS)(b,[...u,d],[l])}function R(){$("#accordion").accordion({header:"h2",collapsible:!0,heightStyle:"panel",autoHeight:!1,animated:!1})}const k=new class{isHomePage(){return!!u.refs.galleryEl}addListenersToHomePage(){document.querySelectorAll(".thumb__link").forEach((t=>t.addEventListener("click",e(n)(this,v,j))))}renderReadPage(){const t=(0,g.getFromLS)(b),r=document.querySelector("#markup-template"),o=r.innerHTML;r.remove();const a=e(n)(this,S,x).call(this,t);e(n)(this,w,E).call(this,a,o),e(n)(this,L,R).call(this)}constructor(){e(i)(this,S),e(i)(this,w),e(i)(this,v),e(i)(this,L)}};k.isHomePage()?u.refs.galleryEl.addEventListener("build",(()=>{k.addListenersToHomePage()})):k.renderReadPage();const D={readGalleryList:document.querySelector("#read-news-list")};"Read"===document.title&&function(e){const t=(0,g.getFromLS)(b),r=new URL(a("DnHGg"));if(p.notFoundRef.classList.add("not-found-box-hidden"),!t.length)return p.notFoundRef.classList.remove("not-found-box-hidden"),void window.scrollTo({top:0,behavior:"smooth"});if(null===e)return;e.addEventListener("click",(function(e){const t=e.target.closest(".gallery-thumb__btn");if(!t)return;const o=e.target.closest(".gallery__item"),n=o.querySelector(".gallery__title").textContent,a=o.querySelector(".gallery__text").textContent,i=o.querySelector(".thumb__text").textContent,s=o.id,l=o.querySelector(".gallery-thumb__subtitle").textContent,c=o.querySelector(".thumb__link").href,d={img:(()=>{const e=o.querySelector(".gallery-thumb").style.backgroundImage.split("");return e.splice(0,5),e.splice(-2,2),e.join("")})(),title:n,text:a,date:i,id:s,category:l,url:c},u=(0,g.getFromLS)(p.FAVORITE_KEY);if(u.find((e=>e.id===s))){const e=u.filter((e=>e.id!==s));return(0,g.setToLS)(p.FAVORITE_KEY,e),void(t.innerHTML=`<p class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="${r}#icon-like-icon"></use></svg></p>`)}const f=[...u,{...d}];(0,g.setToLS)(p.FAVORITE_KEY,f),t.innerHTML=`<p class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="${r}#icon-like"></svg></p>`}))}(D.readGalleryList)})),a.register("hl3Cc",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}})),a.register("8iF6T",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){o.default(e,t),t.add(e)};var r,o=(r=a("7K24o"))&&r.__esModule?r:{default:r}})),a.register("kPZvK",(function(r,o){t(r.exports,"addToReadNews",(function(){return f}));var n=a("7Y9D8"),i=a("gKkQl"),s=a("jAzyG"),l=a("eyjy7");const c=(0,i.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),d=(0,s.getDatabase)(c),u=(0,l.getAuth)(),g=(0,s.ref)(d,"users");function f(t,r){const o=u.currentUser;(0,s.get)(g).then((a=>{const i=[];let l=!1;if(a.forEach((e=>{const r=e.val();r.email.toLowerCase()===o.email.toLowerCase()&&(r.newsReadData.forEach((e=>{e.id===t.id&&(l=!0)})),r.newsReadData.forEach((e=>{i.push(e)})))})),l)return console.log("Article already exists"),void e(n).Notify.success("News already added to read");i.push(t);const c=i.filter(Boolean);return e(n).Notify.success("News added to read"),(0,s.update)((0,s.ref)(d,`users/${r}`),{newsReadData:c}).then((()=>{i.splice(0,i.length)})).catch((t=>{e(n).Notify.failure("Something went wrong, please try again"),console.error(t)}))})).catch((t=>{e(n).Notify.failure("Something went wrong, please try again"),console.error(t)}))}})),a.register("DnHGg",(function(e,t){e.exports=new URL(a("kyEFX").resolve("bwyUR"),import.meta.url).toString()})),a("kyEFX").register(JSON.parse('{"fcKtx":"read.5bf6e423.js","ilJtq":"read.983afc32.css","bwyUR":"icon-card.42ade37b.svg"}'));
//# sourceMappingURL=read.5bf6e423.js.map
