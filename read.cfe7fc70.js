!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=r.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},r.parcelRequired7c6=o),o.register("jLBgW",(function(r,n){t(r.exports,"instance",(function(){return H}));var a=o("8MBJY"),i=o("beht7"),l=o("fyAfh"),c=o("a2hTj"),s=o("dDDEV"),u=o("8nrFW");o("6JpON");var d=o("fkNhc"),f=o("cokon"),g=o("gQOBw"),p=o("5118m"),h=o("cqmI4"),y=o("4LQlN"),m=o("iXDbJ"),v=o("cQoPk"),_=o("1RvkV"),b=(0,d.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),S=(0,f.getDatabase)(b),w=(0,g.getAuth)();(0,f.ref)(S,"users");e(m).init();var L="read_news",E=new WeakSet,x=new WeakSet,k=new WeakSet,R=new WeakSet;function D(e){var t=e,r=t.map((function(e){return e.LSDate})),n=r.filter((function(e,t){return r.indexOf(e)===t})),a=[];return n.forEach((function(e){var r=t.filter((function(t){return t.LSDate===e}));a.push({LSDate:e,news:r})})),a}function j(e,t){var r=document.querySelector("#accordion");e.forEach((function(e){var n=t.replaceAll("{{title}}",e.LSDate).replaceAll("{{card}}",p.markupForFavoritesAndRead.createGalleryCardMarkup(e.news)),a=document.createElement("div");r.appendChild(a),a.innerHTML=n}))}function T(t){var r=t.target.closest(".gallery__item"),n=r.querySelector(".gallery-thumb__already");r.style.opacity="0.7",n.classList.add("gallery-thumb__already--show");var a,o=r.querySelector(".gallery__title").textContent,i=r.querySelector(".gallery__text").textContent,l=r.querySelector(".thumb__text").textContent,c=r.id,s=r.querySelector(".gallery-thumb__subtitle").textContent,d=(new Date).toLocaleDateString(),f=r.querySelector(".thumb__link").href,g={img:(a=r.querySelector(".gallery-thumb").style.backgroundImage.split(""),a.splice(0,5),a.splice(-2,2),a.join("")),title:o,text:i,date:l,id:c,category:s,url:f,LSDate:d},p=(0,y.getFromLS)(L)||[],h=p.find((function(e){return e.id===c})),m=w.currentUser;if(m){var v=m.uid;(0,_.addToReadNews)(g,v)}h||(0,y.setToLS)(L,e(u)(p).concat([g]),[d])}function q(){$("#accordion").accordion({header:"h2",collapsible:!0,heightStyle:"panel",autoHeight:!1,animated:!1})}var H=new(function(){"use strict";function t(){e(a)(this,t),e(l)(this,E),e(l)(this,x),e(l)(this,k),e(l)(this,R)}return e(c)(t,[{key:"isHomePage",value:function(){return!!h.refs.galleryEl}},{key:"addListenersToHomePage",value:function(){var t=this;document.querySelectorAll(".thumb__link").forEach((function(r){return r.addEventListener("click",e(i)(t,k,T))}))}},{key:"renderReadPage",value:function(){var t=(0,y.getFromLS)(L),r=document.querySelector("#markup-template"),n=r.innerHTML;r.remove();var a=e(i)(this,E,D).call(this,t);e(i)(this,x,j).call(this,a,n),e(i)(this,R,q).call(this)}}]),t}());H.isHomePage()?h.refs.galleryEl.addEventListener("build",(function(){H.addListenersToHomePage()})):H.renderReadPage();var A={readGalleryList:document.querySelector("#read-news-list")};"Read"===document.title&&function(t){var r=(0,y.getFromLS)(L),n=new URL(o("5R40L"));if(v.notFoundRef.classList.add("not-found-box-hidden"),!r.length)return v.notFoundRef.classList.remove("not-found-box-hidden"),void window.scrollTo({top:0,behavior:"smooth"});if(null===t)return;t.addEventListener("click",(function(t){var r=t.target.closest(".gallery-thumb__btn");if(r){var a,o=t.target.closest(".gallery__item"),i=o.querySelector(".gallery__title").textContent,l=o.querySelector(".gallery__text").textContent,c=o.querySelector(".thumb__text").textContent,d=o.id,f=o.querySelector(".gallery-thumb__subtitle").textContent,g=o.querySelector(".thumb__link").href,p={img:(a=o.querySelector(".gallery-thumb").style.backgroundImage.split(""),a.splice(0,5),a.splice(-2,2),a.join("")),title:i,text:l,date:c,id:d,category:f,url:g},h=(0,y.getFromLS)(v.FAVORITE_KEY);if(h.find((function(e){return e.id===d}))){var m=h.filter((function(e){return e.id!==d}));return(0,y.setToLS)(v.FAVORITE_KEY,m),void(r.innerHTML='<p class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="'.concat(n,"#").concat("icon-like-icon",'"></use></svg></p>'))}var _=e(u)(h).concat([e(s)({},p)]);(0,y.setToLS)(v.FAVORITE_KEY,_),r.innerHTML='<p class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="'.concat(n,"#").concat("icon-like",'"></svg></p>')}}))}(A.readGalleryList)})),o.register("beht7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}})),o.register("fyAfh",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){n.default(e,t),t.add(e)};var r,n=(r=o("5k7tO"))&&r.__esModule?r:{default:r}})),o.register("1RvkV",(function(r,n){t(r.exports,"addToReadNews",(function(){return g}));var a=o("6JpON"),i=o("fkNhc"),l=o("cokon"),c=o("gQOBw"),s=(0,i.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),u=(0,l.getDatabase)(s),d=(0,c.getAuth)(),f=(0,l.ref)(u,"users");function g(t,r){var n=d.currentUser;(0,l.get)(f).then((function(o){var i=[],c=!1;if(o.forEach((function(e){var r=e.val();r.email.toLowerCase()===n.email.toLowerCase()&&(r.newsReadData.forEach((function(e){e.id===t.id&&(c=!0)})),r.newsReadData.forEach((function(e){i.push(e)})))})),c)return console.log("Article already exists"),void e(a).Notify.success("News already added to read");i.push(t);var s=i.filter(Boolean);return e(a).Notify.success("News added to read"),(0,l.update)((0,l.ref)(u,"users/".concat(r)),{newsReadData:s}).then((function(){i.splice(0,i.length)})).catch((function(t){e(a).Notify.failure("Something went wrong, please try again"),console.error(t)}))})).catch((function(t){e(a).Notify.failure("Something went wrong, please try again"),console.error(t)}))}})),o.register("5R40L",(function(e,t){e.exports=o("aNJCr").getBundleURL("ep4Vl")+o("iE7OH").resolve("6u7XD")})),o("iE7OH").register(JSON.parse('{"ep4Vl":"read.cfe7fc70.js","ilJtq":"read.983afc32.css","6u7XD":"icon-card.42ade37b.svg"}'))}();
//# sourceMappingURL=read.cfe7fc70.js.map
