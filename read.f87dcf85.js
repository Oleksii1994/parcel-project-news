function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=n),n.register("fKrXO",(function(t,r){var o=n("hl3Cc"),a=n("8iF6T");n("7Y9D8");var i=n("gKkQl"),s=n("jAzyG"),l=n("eyjy7"),c=n("cky31"),d=n("3ILHO"),u=n("335mm"),g=n("lL5zp"),f=n("jJkRO"),p=n("kPZvK");const y=(0,i.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),h=(0,s.getDatabase)(y),m=(0,l.getAuth)();(0,s.ref)(h,"users");e(g).init();const _="read_news";var b=new WeakSet,S=new WeakSet,v=new WeakSet,w=new WeakSet;function L(e){const t=e,r=t.map((e=>e.LSDate)),o=r.filter(((e,t)=>r.indexOf(e)===t)),n=[];return o.forEach((e=>{const r=t.filter((t=>t.LSDate===e));n.push({LSDate:e,news:r})})),console.log(n),n}function x(e,t){const r=document.querySelector("#accordion");e.forEach((e=>{const o=t.replaceAll("{{title}}",e.LSDate).replaceAll("{{card}}",c.markupForFavoritesAndRead.createGalleryCardMarkup(e.news)),n=document.createElement("div");r.appendChild(n),n.innerHTML=o}))}function E(e){const t=e.target.closest(".gallery__item"),r=t.querySelector(".gallery-thumb__already");t.style.opacity="0.7",r.classList.add("gallery-thumb__already--show");const o=t.querySelector(".gallery__title").textContent,n=t.querySelector(".gallery__text").textContent,a=t.querySelector(".thumb__text").textContent,i=t.id,s=t.querySelector(".gallery-thumb__subtitle").textContent,l=(new Date).toLocaleDateString(),c=t.querySelector(".thumb__link").href,d={img:(()=>{const e=t.querySelector(".gallery-thumb").style.backgroundImage.split("");return e.splice(0,5),e.splice(-2,2),e.join("")})(),title:o,text:n,date:a,id:i,category:s,url:c,LSDate:l},g=(0,u.getFromLS)(_)||[];console.log(l);const f=g.find((e=>e.id===i));console.log(d);const y=m.currentUser;if(y){const e=y.uid;(0,p.addToReadNews)(d,e)}f||(0,u.setToLS)(_,[...g,d],[l])}function j(){$("#accordion").accordion({header:"h2",collapsible:!0})}const R=new class{isHomePage(){return!!d.refs.galleryEl}addListenersToHomePage(){document.querySelectorAll(".thumb__link").forEach((t=>t.addEventListener("click",e(o)(this,v,E))))}renderReadPage(){const t=(0,u.getFromLS)(_),r=document.querySelector("#markup-template"),n=r.innerHTML;r.remove();const a=e(o)(this,b,L).call(this,t);e(o)(this,S,x).call(this,a,n),e(o)(this,w,j).call(this)}constructor(){e(a)(this,b),e(a)(this,S),e(a)(this,v),e(a)(this,w)}};R.isHomePage()?d.refs.galleryEl.addEventListener("build",(()=>{R.addListenersToHomePage()})):R.renderReadPage();const k={readGalleryList:document.querySelector("#read-news-list")};"Read"===document.title&&function(e){const t=(0,u.getFromLS)(_),r=new URL(n("DnHGg"));if(f.notFoundRef.classList.add("not-found-box-hidden"),!t.length)return f.notFoundRef.classList.remove("not-found-box-hidden"),void window.scrollTo({top:0,behavior:"smooth"});if(null===e)return;e.addEventListener("click",(function(e){const t=e.target.closest(".gallery-thumb__btn");if(!t)return;const o=e.target.closest(".gallery__item"),n=o.querySelector(".gallery__title").textContent,a=o.querySelector(".gallery__text").textContent,i=o.querySelector(".thumb__text").textContent,s=o.id,l=o.querySelector(".gallery-thumb__subtitle").textContent,c=o.querySelector(".thumb__link").href,d={img:(()=>{const e=o.querySelector(".gallery-thumb").style.backgroundImage.split("");return e.splice(0,5),e.splice(-2,2),e.join("")})(),title:n,text:a,date:i,id:s,category:l,url:c},g=(0,u.getFromLS)(f.FAVORITE_KEY);if(g.find((e=>e.id===s))){const e=g.filter((e=>e.id!==s));return(0,u.setToLS)(f.FAVORITE_KEY,e),void(t.innerHTML=`<p class="gallery-thumb__name add">Add to favorite<svg width="16" height="16"><use href="${r}#icon-like-icon"></use></svg></p>`)}const p=[...g,{...d}];(0,u.setToLS)(f.FAVORITE_KEY,p),t.innerHTML=`<p class="gallery-thumb__name add">Remove from favorite<svg width="16" height="16"><use href="${r}#icon-like"></svg></p>`}))}(k.readGalleryList)})),n.register("hl3Cc",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}})),n.register("8iF6T",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){o.default(e,t),t.add(e)};var r,o=(r=n("7K24o"))&&r.__esModule?r:{default:r}})),n.register("kPZvK",(function(t,r){var o,a,i,s;o=t.exports,a="addToReadNews",i=function(){return h},Object.defineProperty(o,a,{get:i,set:s,enumerable:!0,configurable:!0});var l=n("7Y9D8"),c=n("gKkQl"),d=n("jAzyG"),u=n("eyjy7");const g=(0,c.initializeApp)({apiKey:"AIzaSyDD_Eh4tyvM30ivpTHWqfHo7r2h0gDev4Y",authDomain:"project-goit2023-js.firebaseapp.com",databaseURL:"https://project-goit2023-js-default-rtdb.firebaseio.com",projectId:"project-goit2023-js",storageBucket:"project-goit2023-js.appspot.com",messagingSenderId:"407142734195",appId:"1:407142734195:web:6d45ec3cdde16415370d06",measurementId:"G-VMY0EQ75TG"}),f=(0,d.getDatabase)(g),p=(0,u.getAuth)(),y=(0,d.ref)(f,"users");function h(t,r){const o=p.currentUser;(0,d.get)(y).then((n=>{const a=[];let i=!1;if(n.forEach((e=>{const r=e.val();r.email.toLowerCase()===o.email.toLowerCase()&&(r.newsReadData.forEach((e=>{e.id===t.id&&(i=!0)})),r.newsReadData.forEach((e=>{a.push(e)})))})),i)return console.log("Article already exists"),void e(l).Notify.success("News already added to read");a.push(t);const s=a.filter(Boolean);return e(l).Notify.success("News added to read"),(0,d.update)((0,d.ref)(f,`users/${r}`),{newsReadData:s}).then((()=>{a.splice(0,a.length)})).catch((t=>{e(l).Notify.failure("Something went wrong, please try again"),console.error(t)}))})).catch((t=>{e(l).Notify.failure("Something went wrong, please try again"),console.error(t)}))}})),n.register("DnHGg",(function(e,t){e.exports=new URL(n("kyEFX").resolve("bwyUR"),import.meta.url).toString()})),n("kyEFX").register(JSON.parse('{"fcKtx":"read.f87dcf85.js","ilJtq":"read.983afc32.css","bwyUR":"icon-card.42ade37b.svg"}'));
//# sourceMappingURL=read.f87dcf85.js.map
