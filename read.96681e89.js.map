{"mappings":"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","sources":["src/js/add-to-read.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js","node_modules/@parcel/runtime-js/lib/runtime-3b985601edb2676a.js","node_modules/@parcel/runtime-js/lib/runtime-1f5ba7ababe8da22.js"],"sourcesContent":["import { markupForFavoritesAndRead } from './renderMarkup';\nimport { refs } from './refs/refs';\nimport { setToLS, getFromLS } from './local-storage-logic';\nimport Aos from 'aos';\nimport 'aos/dist/aos.css';\nimport { notFoundRef, FAVORITE_KEY, checkLS } from './add-to-favorite';\n\n// import { sendEmailVerification } from 'firebase/auth';\nAos.init();\n\nconst READ_KEY = 'read_news';\n\nclass AddToRead {\n  isHomePage() {\n    const homePage = refs.galleryEl;\n    if (homePage) {\n      return true;\n    }\n    return false;\n  }\n  addListenersToHomePage() {\n    const linkReadMore = document.querySelectorAll('.thumb__link');\n    linkReadMore.forEach(link =>\n      link.addEventListener('click', this.#onReadClick)\n    );\n    // console.log(linkReadMore)\n  }\n\n  renderReadPage() {\n    //рендер маркапу\n    const dataFromLS = getFromLS(READ_KEY);\n    const markupTemplate = document.querySelector('#markup-template');\n    const template = markupTemplate.innerHTML;\n    markupTemplate.remove();\n    const result = this.#getDateLocalStorege(dataFromLS);\n    this.#generateAccordionHTML(result, template);\n    this.#createAccordion();\n  }\n\n  #getDateLocalStorege(dataFromLS) {\n    const objects = dataFromLS;\n    const dates = objects.map(obj => obj.LSDate);\n    const uniqueDates = dates.filter(\n      (LSDate, index) => dates.indexOf(LSDate) === index\n    );\n    const result = [];\n\n    uniqueDates.forEach(LSDate => {\n      const news = objects.filter(obj => obj.LSDate === LSDate);\n      result.push({ LSDate: LSDate, news: news });\n    });\n    console.log(result);\n    return result;\n  }\n\n  #generateAccordionHTML(result, template) {\n    const listArticlesRef = document.querySelector('#accordion');\n    result.forEach(el => {\n      const section = template\n        .replaceAll('{{title}}', el.LSDate)\n        .replaceAll(\n          '{{card}}',\n          markupForFavoritesAndRead.createGalleryCardMarkup(el.news)\n        );\n\n      const div = document.createElement('div');\n      listArticlesRef.appendChild(div);\n      div.innerHTML = section;\n    });\n  }\n\n  #onReadClick(event) {\n    const targetItem = event.target.closest('.gallery__item');\n    const alreadyReadText = targetItem.querySelector('.gallery-thumb__already'); //Додали з Яною стилі на li щоб з'являлась надпис Alredy Read\n    // targetItem.classList.add('gallery__item--background'); //додаємо блюр на картку\n    targetItem.style.opacity = '0.7';\n    alreadyReadText.classList.add('gallery-thumb__already--show'); //opacity на картку\n\n    const img = () => {\n      const resWithoutStart = targetItem\n        .querySelector('.gallery-thumb')\n        .style.backgroundImage.split('');\n\n      resWithoutStart.splice(0, 5);\n      resWithoutStart.splice(-2, 2);\n      return resWithoutStart.join('');\n    };\n    const title = targetItem.querySelector('.gallery__title').textContent;\n    const text = targetItem.querySelector('.gallery__text').textContent;\n    const date = targetItem.querySelector('.thumb__text').textContent;\n    const id = targetItem.id;\n    const category = targetItem.querySelector(\n      '.gallery-thumb__subtitle'\n    ).textContent;\n    const LSDate = new Date().toLocaleDateString();\n    const url = targetItem.querySelector('.thumb__link').href;\n    const article = {\n      img: img(),\n      title,\n      text,\n      date,\n      id,\n      category,\n      url,\n      LSDate,\n    };\n    const dataFromLS = getFromLS(READ_KEY) || [];\n    console.log(LSDate);\n    // добавляємо в localStorage\n    const present = dataFromLS.find(article => article.id === id);\n    if (!present) {\n      setToLS(READ_KEY, [...dataFromLS, article], [LSDate]); // dataFromLS.push(article) // setToLS(READ_KEY, dataFromLS);\n    }\n  }\n  #createAccordion() {\n    $('#accordion').accordion({ header: 'h2', collapsible: true });\n  }\n}\n\nconst instance = new AddToRead(); // створює об'єкт  AddToRead\n\nif (instance.isHomePage()) {\n  //перевірка чи знаходишся на homePage\n  refs.galleryEl.addEventListener('build', () => {\n    instance.addListenersToHomePage(); //опрацьовую клік на readMore\n  });\n} else {\n  instance.renderReadPage(); //малюю readPage\n}\n\nconst readRefs = {\n  readGalleryList: document.querySelector('#read-news-list'),\n};\n\nif (document.title === 'Read') {\n  onLoadReadPage(readRefs.readGalleryList);\n}\n\nfunction onLoadReadPage(ref) {\n  const dataFromLS = getFromLS(READ_KEY);\n  const svgA = new URL('../images/icon-card.svg', import.meta.url);\n  const svgB = 'icon-like';\n  const svgC = 'icon-like-icon';\n  const svgD = 'icon-check';\n  notFoundRef.classList.add('not-found-box-hidden');\n  if (!dataFromLS.length) {\n    notFoundRef.classList.remove('not-found-box-hidden');\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n    return;\n  }\n  if (ref === null) return;\n  ref.addEventListener('click', onGalleryClick);\n\n  // ref.innerHTML = markupForFavoritesAndRead.createGalleryCardMarkup(dataFromLS);\n\n  function onGalleryClick(event) {\n    const targetBtn = event.target.closest('.gallery-thumb__btn');\n    if (!targetBtn) {\n      return;\n    }\n\n    const targetItem = event.target.closest('.gallery__item');\n\n    const img = () => {\n      const resWithoutStart = targetItem\n        .querySelector('.gallery-thumb')\n        .style.backgroundImage.split('');\n\n      resWithoutStart.splice(0, 5);\n      resWithoutStart.splice(-2, 2);\n\n      return resWithoutStart.join('');\n    };\n    const title = targetItem.querySelector('.gallery__title').textContent;\n    const text = targetItem.querySelector('.gallery__text').textContent;\n    const date = targetItem.querySelector('.thumb__text').textContent;\n    const id = targetItem.id;\n    const category = targetItem.querySelector(\n      '.gallery-thumb__subtitle'\n    ).textContent;\n    const url = targetItem.querySelector('.thumb__link').href;\n    const article = { img: img(), title, text, date, id, category, url };\n    const dataFromLS = getFromLS(FAVORITE_KEY);\n    // добавляємо в localStorage\n    const present = dataFromLS.find(article => article.id === id);\n\n    // ===========================================================\n    // const user = auth.currentUser;\n    // if (user) {\n    //   const userId = user.uid;\n    //   addOrDeleteFavoriteNews(article, userId, targetBtn);\n    // }\n    // ===========================================================\n\n    if (present) {\n      const newData = dataFromLS.filter(article => article.id !== id);\n      setToLS(FAVORITE_KEY, newData);\n\n      // ===========================================================\n      // const user = auth.currentUser;\n      // if (user) {\n      //   const userId = user.uid;\n      //   addOrDeleteFavoriteNews(article, userId, targetBtn);\n      // }\n      // ===========================================================\n\n      targetBtn.innerHTML = `<p class=\"gallery-thumb__name add\">Add to favorite<svg width=\"16\" height=\"16\"><use href=\"${svgA}#${svgC}\"></use></svg></p>`;\n      return;\n    }\n\n    const newData = [...dataFromLS, { ...article }];\n    setToLS(FAVORITE_KEY, newData);\n    targetBtn.innerHTML = `<p class=\"gallery-thumb__name add\">Remove from favorite<svg width=\"16\" height=\"16\"><use href=\"${svgA}#${svgB}\"></svg></p>`;\n  }\n}\n\n// if (!dataFromLS.length && notFoundRef !== null) {\n//   notFoundRef.innerHTML = `<h2 class=\"not-found-title hidden\">You haven't added anything to favorite!</h2><img src=\"https://live.staticflickr.com/65535/52770181328_d91f5366f0_z.jpg\">`;\n//   return;\n// }\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('ep4Vl') + require('./helpers/bundle-manifest').resolve(\"6u7XD\");","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ep4Vl\\\":\\\"read.96681e89.js\\\",\\\"ilJtq\\\":\\\"read.983afc32.css\\\",\\\"6u7XD\\\":\\\"icon-card.42ade37b.svg\\\"}\"));"],"names":["$8MBJY","parcelRequire","$parcel$interopDefault","$iXDbJ","init","$e63f51956629540a$var$READ_KEY","$e63f51956629540a$var$_getDateLocalStorege","WeakSet","$e63f51956629540a$var$_generateAccordionHTML","$e63f51956629540a$var$_onReadClick","$e63f51956629540a$var$_createAccordion","$e63f51956629540a$var$getDateLocalStorege","dataFromLS","objects","dates","map","obj","LSDate","uniqueDates","filter","index","indexOf","result","forEach","news","push","console","log","$e63f51956629540a$var$generateAccordionHTML","template","listArticlesRef","document","querySelector","el","section","replaceAll","$5118m","markupForFavoritesAndRead","createGalleryCardMarkup","div","createElement","appendChild","innerHTML","$e63f51956629540a$var$onReadClick","event","targetItem","target","closest","alreadyReadText","style","opacity","classList","add","resWithoutStart","title","textContent","text","date","id","category","Date","toLocaleDateString","url","href","article1","img","backgroundImage","split","splice","join","$4LQlN","getFromLS","find","article","setToLS","$8nrFW","concat","$e63f51956629540a$var$createAccordion","$","accordion","header","collapsible","$e63f51956629540a$var$instance","AddToRead","$fyAfh","this","key","$cqmI4","refs","galleryEl","querySelectorAll","link","addEventListener","$beht7","_this","markupTemplate","remove","call","isHomePage","addListenersToHomePage","renderReadPage","$e63f51956629540a$var$readRefs","readGalleryList","ref","dataFromLS1","svgA","URL","$cQoPk","notFoundRef","length","window","scrollTo","top","behavior","targetBtn","article2","FAVORITE_KEY","newData","newData1","$dDDEV","$e63f51956629540a$var$onLoadReadPage","Object","defineProperty","module","exports","value","default","receiver","privateSet","fn","has","TypeError","$b5362597a15e80da$var$_checkPrivateRedeclaration","__esModule","getBundleURL","resolve","register","JSON","parse"],"version":3,"file":"read.96681e89.js.map"}